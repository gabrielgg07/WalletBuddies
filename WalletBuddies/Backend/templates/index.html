<!doctype html>
<html>
  <head><meta charset="utf-8"/><title>Plaid Link</title></head>
  <body>
    <button id="connect">Connect Bank (Sandbox)</button>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
    <script>
      document.getElementById("connect").onclick = async () => {
        const r = await fetch("/api/create_link_token",{method:"POST"});
        const {link_token} = await r.json();
        Plaid.create({
          token: link_token,
          onSuccess: async (public_token) => {
            await fetch("/api/exchange_public_token",{
              method:"POST", headers:{"Content-Type":"application/json"},
              body: JSON.stringify({ public_token })
            });
            alert("Linked! Check your terminal for accounts & transactions.");
          }
        }).open();
      };
    </script>
  </body>
</html>
